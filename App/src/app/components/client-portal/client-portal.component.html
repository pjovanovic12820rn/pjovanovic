<div class="client-portal-container">

  <app-alert></app-alert>

  <h1>Client Portal</h1>

  <!-- Filter Section -->
  <div class="flex justify-between">

    <div class="flex-col" style="gap: 0.5rem">
      <span>Filter by:</span>
      <div class="filter-section">
        <input-text placeholder="Name" [(ngModel)]="filter.name" (input)="filterClients()" label=""/>
        <input-text placeholder="Last Name" [(ngModel)]="filter.surname" (input)="filterClients()" label=""/>
        <input-text placeholder="Email" type="email" [(ngModel)]="filter.email" (input)="filterClients()" label=""/>
      </div>
    </div>

    <app-button *ngIf="isEmployee || isAdmin" (onClick)="registerNewUser()" label="Register New User"/>
  </div>

  <!-- Client List -->
  <div class="client-list">
    <div class="client-card justify-between" *ngFor="let client of pagedClients">
      <div class="client-info">
        <span class="client-name"><strong>{{ client.firstName }} {{ client.lastName }}</strong></span>
        <span class="client-email">{{ client.email }}</span>
      </div>
      <div class="flex" style="gap: 0.4rem">
        <app-button *ngIf="isAdmin || isEmployee" (click)="listAccounts(client.id)" label="List Accounts"/>
        <app-button *ngIf="isAdmin || isEmployee" [routerLink]="['/users', client.id]" label="Edit User"/>
        <app-button *ngIf="isAdmin" (click)="deleteUser(client.id)" label="Delete User"/>
        <app-button *ngIf="isAdmin" (click)="clientLoans(client.id)" label="Loans"/>
      </div>
    </div>
  </div>

  <!-- Pagination Controls -->
  <app-pagination
    [totalItems]="filteredClients.length"
    [pageSize]="pageSize"
    (pageChanged)="onPageChanged($event)">
  </app-pagination>

</div>
